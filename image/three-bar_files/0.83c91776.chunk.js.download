(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[0],{744:function(e,t,o){"use strict";o.r(t);var c=o(2),i=o(7),r=o(1),n=o(9),d=o(73),l=o(5),v=o(35),a=o(125),O={ORDERS_NOW:"ordersNow",TRACK_ORDER:"trackOrder",WE_ARE_WORKING_ON:"weAreWorkingOn",YOUR_ORDER:"yourOrder",HAS_BEEN_CONFIRMED:"hasBeenConfirmed",HAS_SCHEDULED:"hasScheduled",PICKUP:"takeaway",AT:"At",DELIVERY:"delivery"},u=o(8),s=o(3),b=o(39),R=o(347),j=o(0);t.default=function(e){var t=Object(n.b)(),o={history:Object(d.f)()},E=Object(n.c)((function(e){return e})),f=E.tenantReducer,I=E.orderHistoryReducer,_=E.profileReducer,D=Object(r.useState)(!1),H=Object(i.a)(D,2),S=H[0],N=H[1],y=Object(r.useState)(""),A=Object(i.a)(y,2),T=A[0],h=A[1],p=Object(r.useState)(),C=Object(i.a)(p,2),m=C[0],k=C[1],g=function(){m&&(clearTimeout(m),k(void 0))};Object(r.useEffect)((function(){return g(),t(Object(a.e)()),function(){return g()}}),[]);var K=function(){if(v.e&&(null===_||void 0===_?void 0:_.customerId)&&(null===f||void 0===f?void 0:f.tenantId)&&(null===e||void 0===e?void 0:e.isHeaderTrackOrderEnabled())){t(Object(a.c)({customerId:null===_||void 0===_?void 0:_.customerId,tenantId:null===f||void 0===f?void 0:f.tenantId},{OrderStatus:"",OrderMode:""}))}};Object(r.useEffect)((function(){g(),K()}),[v.e,null===_||void 0===_?void 0:_.customerId,null===f||void 0===f?void 0:f.tenantId]);Object(r.useEffect)((function(){var t,o,c,i;I&&(null===I||void 0===I?void 0:I.activeOrderHistory)&&!(null===I||void 0===I?void 0:I.activeOrderHistoryLoading)&&((null===I||void 0===I||null===(t=I.activeOrderHistory)||void 0===t?void 0:t.length)?(!1===(null===f||void 0===f||null===(o=f.componentOptions)||void 0===o||null===(c=o.web)||void 0===c||null===(i=c.global)||void 0===i?void 0:i.showBlackStripWithOrderTracker)&&e.setShowBlackStripeContent(!1),!S&&N(!0),h(W()),!m&&k(setTimeout((function(){g(),K()}),18e4))):S&&N(!1))}),[null===I||void 0===I?void 0:I.activeOrderHistory]);var W=function(){var e,t;if(1!==(null===I||void 0===I||null===(e=I.activeOrderHistory)||void 0===e?void 0:e.length))return"".concat(Object(l.e)(O.WE_ARE_WORKING_ON)," ").concat(null===I||void 0===I||null===(t=I.activeOrderHistory)||void 0===t?void 0:t.length," ").concat(Object(l.e)(O.ORDERS_NOW));var o,c,i=null===I||void 0===I?void 0:I.activeOrderHistory[0];if(!1===(null===i||void 0===i||null===(o=i.requestedDateTime)||void 0===o?void 0:o.isForNow)){var r="".concat(Object(l.e)(O.YOUR_ORDER)," # ").concat(null===i||void 0===i?void 0:i.posOrderId," ").concat(Object(l.e)(O.HAS_SCHEDULED)," ");return Object(s.dc)(null===i||void 0===i?void 0:i.service)===u.z.DELIVERY?"".concat(r," ").concat(Object(l.e)(O.DELIVERY)," ").concat(Object(l.e)(O.AT)):Object(s.dc)(null===i||void 0===i?void 0:i.service)===u.z.PICKUP?"".concat(r," ").concat(Object(l.e)(O.PICKUP)," ").concat(Object(l.e)(O.AT)):"".concat(r)}return Object(s.dc)(null===i||void 0===i?void 0:i.service)===u.z.DELIVERY?"".concat(Object(l.e)(O.YOUR_ORDER)," # ").concat(null===i||void 0===i?void 0:i.posOrderId," ").concat(Object(l.e)(O.HAS_BEEN_CONFIRMED)):Object(s.dc)(null===i||void 0===i?void 0:i.service)===u.z.PICKUP?"".concat(Object(l.e)(O.WE_ARE_WORKING_ON)," ").concat(null===I||void 0===I||null===(c=I.activeOrderHistory)||void 0===c?void 0:c.length," ").concat(Object(l.e)(O.ORDERS_NOW)):void 0},w=Object(r.useCallback)((function(){var e;(null===I||void 0===I||null===(e=I.activeOrderHistory)||void 0===e?void 0:e.length)>1?Object(s.Vb)(o):function(e){if(null===e||void 0===e?void 0:e.id){var t=Object(c.a)(Object(c.a)({},e),{},{customer:null===_||void 0===_?void 0:_.basic}),i=Object(b.w)(null===f||void 0===f?void 0:f.tenantId,t);i.postOrderDetails={},localStorage.setItem(u.R.ORDER_TRACKING,JSON.stringify(i)),Object(s.bc)(o)}else console.error(JSON.stringify(e)),Object(s.ac)(o)}(null===I||void 0===I?void 0:I.activeOrderHistory[0])}),[]);return S&&Object(j.jsx)(R.a,Object(c.a)(Object(c.a)({},e),{},{testId:"HeaderTrackOrderItems",importPath:"HEADER_ORDER_TRACKER_ITEM",buttonText:Object(l.e)(O.TRACK_ORDER),trackOrderTitle:T,onTrackOrderBtnClickHandler:w}))}}}]);